document.addEventListener('DOMContentLoaded', () => {
  fetch('/api/resultado')
    .then(res => res.json())
    .then(data => {
      const contenedor = document.getElementById('contenedor-resultados');
      contenedor.innerHTML = '';

      if (data.length === 0) {
        contenedor.textContent = 'No hay resultados registrados aún.';
        return;
      }
       // Ordenar por fecha (más reciente primero)
      data.sort((a, b) => new Date(b.fecha) - new Date(a.fecha));

      data.forEach(item => {
        const div = document.createElement('div');
        div.className = 'resultado-item';
        div.innerHTML = `
          <strong>${item.nombre}</strong> - ${item.resultado} en ${item.intentos} intento(s) 
          <br><small>${new Date(item.fecha).toLocaleString()}</small>
          <hr />
        `;
        contenedor.appendChild(div);
      });
    })
    .catch(err => {
      document.getElementById('contenedor-resultados').textContent = 'Error al cargar resultados.';
      console.error(err);
    });
});
